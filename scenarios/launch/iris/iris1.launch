<launch>

	<arg name="ns" value="iris1"/>
	
	<arg name="body_id" value="17"/>


	<arg name="fcu_url" default="/dev/ttyUSB0:57600" />
	<arg name="gcs_url" default="udp://127.0.0.1:14556@127.0.0.1:14551" />
	<arg name="tgt_system" default="1" />
	<arg name="tgt_component" default="1" />


<!-- CONTROLLER -->
<!-- Main values -->
	<group ns="$(arg ns)">
		<param name="PID_CONTROL_CANCEL_GRAVITY" value="1370"/>
		<param name="PID_Ktt" value="1000"/>
		<param name="PID_Kphi" value="1000"/>
		<param name="PID_w" value="1.1"/>
		<param name="PID_w_z " value=" 1.7"/>
		<param name="PID_N_yaw" value="500"/>
		<param name="PID_K_yaw" value="2"/>
		<param name="PID_w_inf" value="5"/>
		<param name="PID_I_lim" value="0.5"/>
		<param name="PID_K_i" value="7"/>

<!-- Unimportant values -->
	<!-- <param name="PID_CONTROL_MIN" value="1000"/>
	<param name="PID_CONTROL_NEUTRAL" value="1500"/>
	<param name="PID_CONTROL_MAX" value="2000"/>
	<param name="PID_CONTROL_ARMING_MIN" value="1025"/>
	<param name="PID_x_i" value="math.sqrt(2)/2"/>
	<param name="PID_Kp" value="w*w"/>
	<param name="PID_Kv" value="2*x_i*w"/>
	<param name="PID_Kv_z" value=" w_z*w_z"/>
	<param name="PID_Kp_z" value=" 2*x_i*w_z"/> -->
	</group>



	<group ns="$(arg ns)">
		<param name="body_id" value="$(arg body_id)"/>
		<node pkg="mavros" type="mavros_node" name="mavros" required="true" clear_params="true" output="screen">
			<param name="fcu_url" value="$(arg fcu_url)" />
			<param name="gcs_url" value="$(arg gcs_url)" />
			<param name="target_system_id" value="$(arg tgt_system)" />
			<param name="target_component_id" value="$(arg tgt_component)" />

			<!-- remap mavlink bridge topics -->
			<remap from="/mavlink/to" to="mavlink/to" />
			<remap from="/mavlink/from" to="mavlink/from" />

			<!-- load blacklist, config -->
			<rosparam command="load" file="$(find mavros)/launch/apm_pluginlists.yaml" />
			<rosparam command="load" file="$(find mavros)/launch/apm_config.yaml" />
		</node>
	</group>
</launch>
